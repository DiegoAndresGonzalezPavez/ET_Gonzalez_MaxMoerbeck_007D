<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/perfil"></ion-back-button>
    </ion-buttons>
    <ion-title>Actualizar Perfil</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-card>
    <ion-card-header>
      <ion-card-title>Editar Información del Usuario</ion-card-title>
    </ion-card-header>
    <ion-card-content>
      <form (ngSubmit)="actualizarUsuario()">
        <ion-item>
          <ion-label position="stacked">Imagen de Perfil</ion-label>
          <input type="file" (change)="fileSelected($event)" accept="image/*">

        </ion-item>

        <ion-item>
          <ion-label position="stacked">Vista Previa de la Imagen</ion-label>
          <img *ngIf="usuario.imagenUrl" [src]="usuario.imagenUrl" alt="Imagen de Perfil" style="width: 100px; height: 100px; margin-top: 10px; border-radius: 50%;" />
        </ion-item>

        <ion-item>
          <ion-label position="stacked">Nombre</ion-label>
          <ion-input [(ngModel)]="usuario.nombre" name="nombre" required></ion-input>
        </ion-item>
        
        <ion-item>
          <ion-label position="stacked">Correo</ion-label>
          <ion-input [(ngModel)]="usuario.correo" name="correo" type="email" required></ion-input>
        </ion-item>
        
        <ion-item>
          <ion-label position="stacked">Contraseña</ion-label>
          <ion-input [(ngModel)]="usuario.contrasena" [type]="mostrarContrasena ? 'text' : 'password'" name="contrasena" required></ion-input>
          <ion-button slot="end" fill="clear" (click)="toggleMostrarContrasena()">
            <ion-icon [name]="mostrarContrasena ? 'eye-off-outline' : 'eye-outline'"></ion-icon>
          </ion-button>
        </ion-item>

        <ion-item>
          <ion-label position="stacked">RUT</ion-label>
          <ion-input [(ngModel)]="usuario.rut" name="rut" required></ion-input>
        </ion-item>

        <div style="text-align: center; margin-top: 20px;">
          <ion-button type="submit" color="success">Actualizar</ion-button>
          <ion-button color="danger" (click)="cancelar()">Cancelar</ion-button>
        </div>
      </form>
    </ion-card-content>
  </ion-card>
</ion-content>

<ion-footer>
  <ion-toolbar>
    <div class="social-icons">
      <ion-button href="https://www.instagram.com/duoc_maipu/" target="_blank" fill="clear">
        <ion-icon name="logo-instagram"></ion-icon>
      </ion-button>
      <ion-button href="https://www.duoc.cl" target="_blank" fill="clear">
        <ion-icon name="globe-outline"></ion-icon>
      </ion-button>
      <ion-button href="https://twitter.com/duocuc" target="_blank" fill="clear">
        <ion-icon name="logo-twitter"></ion-icon>
      </ion-button>
    </div>
    <div class="footer-text">
      <p>© 2024 DuocUC. Todos los derechos reservados.</p>
    </div>
  </ion-toolbar>
</ion-footer>
